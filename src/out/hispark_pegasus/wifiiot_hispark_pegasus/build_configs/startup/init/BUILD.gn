# import("//build/ohos.gni")
# import("//build/ohos_var.gni")
import("//build/ohos/ohos_kits.gni")
import("//build/ohos/ohos_part.gni")
import("//build/ohos/ohos_test.gni")

ohos_part("init") {
  subsystem_name = "startup"
  module_list = [
    "//base/startup/init_lite/services:startup_init",
    "//base/startup/init_lite/ueventd:startup_ueventd",
    "//base/startup/init_lite/watchdog:watchdog",
    "//base/startup/init_lite/services/begetctl:begetctl",
    "//base/startup/init_lite/services/begetctl:paramshell",
    "//base/startup/init_lite/services/plugin:plugin",
    "//base/startup/init_lite/interfaces/innerkits:libbegetutil",
    "//base/startup/init_lite/interfaces/kits:deviceinfo_ndk",
    "//base/startup/init_lite/interfaces/innerkits:libbeget_proxy",
    "//base/startup/init_lite/interfaces/innerkits/file:libfile",
    "//base/startup/init_lite/interfaces/innerkits/socket:libsocket",
    "//base/startup/init_lite/services/loopevent:loopevent",
    "//base/startup/init_lite/interfaces/innerkits/plugin:libplugin",
    "//base/startup/init_lite/device_info:device_info_group",
    "//base/startup/init_lite/interfaces/innerkits/sandbox:libsandbox",
  ]
  origin_name = "init"
  variant = "phone"
}

ohos_inner_kits("init_inner_kits") {
  sdk_libs = [
    {
      type = "so"
      name = "//base/startup/init_lite/interfaces/innerkits:libbegetutil"
      header = {
        header_files = [
          "init_socket.h",
          "init_file.h",
          "fs_manager/fs_manager.h",
          "init_reboot.h",
          "service_control.h",
          "beget_ext.h",
          "systemcapability.h",
        ]
        header_base = "//base/startup/init_lite/interfaces/innerkits/include/"
      }
    },
    {
      type = "so"
      name = "//base/startup/init_lite/interfaces/innerkits:libbeget_proxy"
      header = {
        header_files = [ "service_watcher.h" ]
        header_base = "//base/startup/init_lite/interfaces/innerkits/include/"
      }
    },
  ]
  part_name = "init"
  origin_name = "init"
  variant = "phone"
}

ohos_part_test("init_test") {
  testonly = true
  test_packages = [
    "//base/startup/init_lite/test/unittest:init_test",
    "//base/startup/init_lite/test/fuzztest:fuzztest",
  ]
  deps = [ ":init" ]
  part_name = "init"
  subsystem_name = "startup"
}
